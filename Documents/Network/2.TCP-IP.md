# 0.序

TCP/IP 协议过去是一个，后来拆分为两个。  
应用程序使用 Socket 库和解析器 =>  
操作系统协议栈，包括 TCP(transmission control protocol)/UDP(user datagram protocol) 连接，以及下层的 IP(internet protocol)/ICMP(internet control message protocol)/ARP(address resolution protocol) 网络传输 =>  
驱动程序，主要是控制网卡的驱动程序 =>  
硬件，网卡

> TCP/UDP 协议用来接受应用程序的委托收发数据；  
> IP 协议用来控制网络包收发操作；  
> ICMP 协议用于告知网络包传送过程中的错误以及各种控制消息；  
> ARP 协议用于根据 IP 地址查询响应的以太网 MAC 地址；  
> 协议栈内部有一块用于存放控制信息的内存空间，记录了用于控制通信操作的控制信息，例如通信对象的 IP 地址、端口号、通信操作的进行状态。

# 1. socket 套接字

## 1.1 查看套接字

`netstat` 用来查看，展示信息包括协议类型（TCP/UDP）、本地 IP 地址和端口号、通信对象 IP 地址和端口号、通信状态（LISTENING/ESTABLISHED...）、进程标识符。

## 1.2 调用 socket

应用程序（浏览器）调用 gethostbyname(...)，通过 UDP 和 IP 模块查询 DNS 服务器。  
应用程序调用 socket(...) 创建套接字，分配一块内存空间，存储协议栈返回的描述符和其他对象同步信息。  
应用程序调用 connect(...) 与服务器进行连接，获取服务器的 IP 地址和端口号等信息。
